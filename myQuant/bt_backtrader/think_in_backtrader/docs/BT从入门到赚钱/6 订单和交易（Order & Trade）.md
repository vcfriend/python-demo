# 6 订单和交易（Order & Trade）

1. 用 sell/buy/cancel 方法下单
2. 不同的订单类型逻辑
3. Order的状态变化
4. 订单有效期
5. 订单的数量Sizer
6. 订单的通知
7. 订单下单时机和执行时机
   1. 默认：当日下单，次日成交
   2. 收盘作弊模式 head_on_close
   3. 开盘作弊模式 head_on_open
8. 利用 order_target_xxx方法下单
9. Trade的概念
10. Trade的生命周期
11. Trade的通知
12. Positon

## 各种执行类型 exetype

不同的exetype的订单，有不同的成交逻辑，见下表：

| TYPE         | 名称     | 参数   | 成交逻辑                                                     |
| ------------ | -------- | ------ | ------------------------------------------------------------ |
| MARKET       | 市场单   | 无     | T0下单，T1开盘价成交；<br>按T1开盘价成交，不考虑下单时的订单价格和其他限制 |
| Limit        | 限价单   | lprice | 从T1开始匹配价格，匹配到则按市场价成交，如一致匹配不到则订单取消。<br>从T1的Bar开始找到符合指定价格的机会，如果达到则成交，否则等到限期则撤销。<br>利用Open/High/Low/Close四个价格寻找合适的匹配机会<br> |
| Close        | 收盘价单 |        | T0下单，T1收盘价价格成交                                     |
| Stop         | 止损单   |        | 当价格突破*price*时，触发订单成交。一旦触发，立即按市场价成交。<br>买单：等待时机，时机满足立即以price以上价格成交<br/>卖单：同买单逻辑相反 |
| Stoplimit    |          |        | 同时设置Stop触发价格和Limit成交价格。                        |
| LimitTrigger |          |        |                                                              |





